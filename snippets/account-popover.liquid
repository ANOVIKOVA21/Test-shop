{%- doc -%}
  Renders the account popover for desktop users, which appears when clicking the account icon. It contains links for account actions like login, logout, and viewing account details.

  @param {object} [settings] - The theme-level settings.

  @param {string} [settings.popover_color_scheme] - The color scheme for the popover panel.
{%- enddoc -%}
<anchored-popover-component
  data-close-on-resize="true"
  class="account-popover mobile:hidden"
>
  {% render 'account-button' with 'account-popover' as popover_id %}
  <div
    class="account-popover__panel details-content color-{{ settings.popover_color_scheme }}"
    id="account-popover"
    popover="auto"
    ref="popover"
  >
    {% render 'account-actions' %}
  </div>
</anchored-popover-component>

{% stylesheet %}
  .account-popover {
    --account-popover-min-width: 18.75rem;
    --account-actions-max-width: 22rem;
  }

  .account-popover__summary {
    padding: 0;

    &:hover {
      color: var(--color-foreground);
    }
  }

  .header__column--right:has(.account-popover__panel:popover-open)::after {
    position: absolute;
    content: '';
    width: 18.75rem;
    height: 100%;
    right: 0;
    background-color: var(--color-background);
    z-index: -1;
  }
  .header__row:has(.account-popover__panel:popover-open) {
    mix-blend-mode: difference;
  }
  .header__row:has(.account-popover__panel:popover-open) {
    color: var(--color-primary);
    .account-button {
      color: var(--color-primary);
    }
  }
  .account-popover__panel {
    --account-popover-opacity: 0;
    --account-popover-y: 20px;
    position-anchor: --account-button-trigger;
    margin: 0;
    left: unset;
    width: max-content;
    min-width: var(--account-popover-min-width);
    border: var(--style-border-popover);
    background-color: var(--color-background);
    overflow-y: hidden;
    opacity: var(--account-popover-opacity);
    translate: 0 var(--account-popover-y);
    transition-property: display, opacity, translate;
    transition-duration: 0.3s;
    transition-timing-function: var(--ease-out-quad);
    transition-behavior: allow-discrete;
    top: calc(anchor(bottom) + var(--header-padding));

    &:popover-open {
      --account-popover-opacity: 1;
      --account-popover-y: 0px;
    }

    @supports not (position-anchor: --account-button-trigger) {
      top: calc(var(--anchor-top) * 1px + var(--minimum-touch-target) + var(--header-padding));
      right: calc(var(--anchor-right) * 1px);
    }

    @supports not selector(:popover-open) {
      &.\:popover-open {
        --account-popover-opacity: 1;
        --account-popover-y: 0px;
      }
    }
  }

  @starting-style {
    .account-popover__panel {
      --account-popover-opacity: 0.7;
      --account-popover-y: 20px;
    }

    .account-popover__panel:popover-open {
      --account-popover-opacity: 0.7;
      --account-popover-y: 20px;
    }
  }
{% endstylesheet %}
